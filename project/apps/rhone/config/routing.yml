# You can find more information about this file on the symfony website:
# http://www.symfony-project.org/reference/1_4/en/10-Routing

# default rules

# Auth

auth_login_no_cas:
  url: /login_no_cas
  param: { module: auth, action: login }

auth_logout:
  url: /logout
  param: { module: auth, action: logout }

auth_deconnexion_usurpation:
  url: /deconnexion_usurpation
  param: { module: auth, action: deconnexionUsurpation }

auth_state:
  url: /auth/state
  param: { module: auth, action: state }

common_homepage:
  url: /
  param: { module: common, action: accueil }

common_accueil:
  url: /
  param: { module: common, action: accueil }

accueil:
  url: /
  param: { module: common, action: accueil }

setflash:
  url: /afficher_message
  param: { module: global, action: setFlash }

# Common

contact:
  url: /contact
  param: { module: common, action: contact }

mentions_legales:
  url: /mentions-legales
  param: { module: common, action: mentionsLegales }

# Déclaration

declaration:
  url: /declaration
  param: { module: declaration, action: index }
  class: DeclarationRoute

declaration_doc:
  url: /declaration/doc
  param: { module: declaration, action: doc }

declaration_export:
  url: /declarations/export
  param: { module: declaration, action: export }

declaration_etablissement_selection:
  url: /declarations-etablissement-selection
  param: { module: declaration, action: etablissementSelection }

declaration_etablissement:
  url: /declarations/:identifiant
  param: { module: declaration, action: etablissement }
  class: DeclarationDeclarantRoute
  options:
    model:    EtablissementRoute
    type:     object
  requirements:
    sf_method: [get]


declaration_usurpation:
  url: /declarations-usurpation/:identifiant
  param: { module: declaration, action: usurpation }
  class: DeclarationDeclarantRoute
  options:
    model:    EtablissementRoute
    type:     object
  requirements:
    sf_method: [get, post]

# PIECE

get_piece:
  url: /piece/get/:doc_id/:piece_id
  param: { module: piece, action: get }

# FICHIER

pieces_historique:
  url: /historique-documents/:identifiant
  param: { module: fichier, action: piecesHistorique }
  class: DeclarationDeclarantRoute
  options:
    model:    Etablissement
    type:     object
  requirements:
    sf_method: [get]

get_fichier:
  url: /fichier/get/:id
  param: { module: fichier, action: get }
  class: FichierRoute
  options:
    model:    Fichier
    type:     object
  requirements:
    sf_method: [get]

delete_fichier:
  url: /fichier/delete/:id
  param: { module: fichier, action: delete }
  class: FichierRoute
  options:
    model:    Fichier
    type:     object
  requirements:
    sf_method: [get]

upload_fichier:
  url: /fichier/upload/:identifiant
  param: { module: fichier, action: upload }
  class: DeclarationDeclarantRoute
  options:
    model:    Etablissement
    type:     object
  requirements:
    sf_method: [get, post]

mon_compte:
  url: /mon-compte
  param: { module: compte_teledeclarant, action: modification }

redirect_to_mon_compte_civa:
  url: /mon-compte-civa
  param: { module: compte_teledeclarant, action: redirectToMonCompteCiva }

#Facturation

facturation:
  url: /facturation
  param: { module: facturation, action: index }
  requirements:
    sf_method: [get, post]
  class: FacturationRoute

facturation_massive:
  url: /facturation_massive
  param: { module: facturation, action: massive }
  requirements:
    sf_method: [get, post]
  class: FacturationRoute

facturation_pdf:
  url: /facturation/pdf/:id
  param: { module: facturation, action: latex }
  class: FactureRoute
  options:
    model:    Facture
    type:     object
  requirements:
    sf_method: [get]

facturation_edition:
  url: /facturation/edition/:id
  param: { module: facturation, action: edition }
  class: FactureRoute
  options:
    model:    Facture
    type:     object
  requirements:
    sf_method: [get, post]

facturation_avoir:
  url: /facturation/avoir/:id
  param: { module: facturation, action: avoir }
  class: FactureRoute
  options:
    model:    Facture
    type:     object
  requirements:
    sf_method: [get, post]

facturation_paiement:
  url: /facturation/paiement/:id
  param: { module: facturation, action: paiement }
  class: FactureRoute
  options:
    model:    Facture
    type:     object
  requirements:
    sf_method: [get, post]

facturation_regenerate:
  url: /facturation/regenerer/:id
  param: { module: facturation, action: regenerate }
  class: FactureRoute
  options:
    model:    Facture
    type:     object
  requirements:
    sf_method: [get]

facturation_declarant:
  url: /facturation/declarant/:id
  param: { module: facturation, action: declarant }
  class: FacturationDeclarantRoute
  options:
    model:    Compte
    type:     object
  requirements:
    sf_method: [get, post]


#Génération

generation_view:
  url: /generation/:type_document/:date_emission
  param: { module: generation, action: view }
  requirements:
    sf_method: [get]

generation_delete:
  url: /generation/:type_document/:date_emission/delete
  param: { module: generation, action: delete }
  requirements:
    sf_method: [get]

generation_regenerate:
  url: /generation/:type_document/:date_emission/regenerer
  param: { module: generation, action: regenerate }
  requirements:
    sf_method: [get]

#Export

export:
  url: /export
  param: { module: export, action: index }
  requirements:
    sf_method: [get, post]
  class: ExportRoute

export_generation:
  url: /export/generation/:id
  param: { module: export, action: generation }
  requirements:
    sf_method: [get]
  class: ExportRoute

#Défaut

default_index:
  url:   /:module
  param: { action: index }

default:
  url:   /:module/:action/*
